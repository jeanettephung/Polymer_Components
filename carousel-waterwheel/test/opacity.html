<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>Opacity test</title>

    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../web-component-tester/browser.js"></script>

    <link rel="import" href="../carousel-waterwheel.html">
  </head>
  <body>
    
    <test-fixture id="Default">
      <template>
        <carousel-waterwheel data='[
          {"src": "https://thumbs.dreamstime.com/b/male-crowntail-betta-fish-isolated-black-background-beautiful-blue-77203959.jpg", "caption": "A blue betta"},
          {"src": "https://upload.wikimedia.org/wikipedia/commons/4/42/Betta_splendens_male_crowntail.png", "caption": "A blue-red betta"},
          {"src": "https://cdn.idropnews.com/wp-content/uploads/2017/03/23164924/Beta-Fish-Wallpaper-Chevanon-Photography-1000x600.jpg", "caption": "A red betta"},
          {"src": "https://thumbs.dreamstime.com/b/blue-crowntail-betta-fish-siamese-fighting-fish-black-background-71712481.jpg", "caption": "A blue betta"},
          {"src": "https://thumbs.dreamstime.com/b/red-blue-siamese-fighting-fish-betta-fish-isolated-black-background-58695275.jpg", "caption": "A red-white betta"},
          {"src": "http://fishkeepingadvice.com/wp-content/uploads/siamese-fighting-fish.jpg", "caption": "A blue-purple betta"},
          {"src": "https://static.seattletimes.com/wp-content/uploads/2016/11/66ae45dc30524386bf08aee8a751b279-780x532.jpg", "caption": "A red-white-blue betta"},
          {"src": "https://media.istockphoto.com/photos/white-yellow-siamese-fighting-fish-picture-id601925038?k=6&m=601925038&s=612x612&w=0&h=pOtNyPfF6pEgm_x8Qi1flpLKmJ1tcbOhnEsZ97BO8wE=", "caption": "A yellow-white betta"},
          {"src": "http://www.fubiz.net/wp-content/uploads/2013/11/Stunning-Portraits-of-Fish-1.jpg", "caption": "A white betta"},
          {"src": "https://i.pinimg.com/736x/41/f3/ea/41f3eaba447b068d04f27f88f85d8e05--tropical-animals-tropical-fish.jpg", "caption": "A white-red betta"}
        ]'></carousel-waterwheel>
      </template>
    </test-fixture>
    
    <test-fixture id="OpacityGen">
      <template>
        <carousel-waterwheel data='[
          {"src": "https://thumbs.dreamstime.com/b/male-crowntail-betta-fish-isolated-black-background-beautiful-blue-77203959.jpg", "caption": "A blue betta"},
          {"src": "https://upload.wikimedia.org/wikipedia/commons/4/42/Betta_splendens_male_crowntail.png", "caption": "A blue-red betta"},
          {"src": "https://cdn.idropnews.com/wp-content/uploads/2017/03/23164924/Beta-Fish-Wallpaper-Chevanon-Photography-1000x600.jpg", "caption": "A red betta"},
          {"src": "https://thumbs.dreamstime.com/b/blue-crowntail-betta-fish-siamese-fighting-fish-black-background-71712481.jpg", "caption": "A blue betta"},
          {"src": "https://thumbs.dreamstime.com/b/red-blue-siamese-fighting-fish-betta-fish-isolated-black-background-58695275.jpg", "caption": "A red-white betta"},
          {"src": "http://fishkeepingadvice.com/wp-content/uploads/siamese-fighting-fish.jpg", "caption": "A blue-purple betta"},
          {"src": "https://static.seattletimes.com/wp-content/uploads/2016/11/66ae45dc30524386bf08aee8a751b279-780x532.jpg", "caption": "A red-white-blue betta"},
          {"src": "https://media.istockphoto.com/photos/white-yellow-siamese-fighting-fish-picture-id601925038?k=6&m=601925038&s=612x612&w=0&h=pOtNyPfF6pEgm_x8Qi1flpLKmJ1tcbOhnEsZ97BO8wE=", "caption": "A yellow-white betta"},
          {"src": "http://www.fubiz.net/wp-content/uploads/2013/11/Stunning-Portraits-of-Fish-1.jpg", "caption": "A white betta"},
          {"src": "https://i.pinimg.com/736x/41/f3/ea/41f3eaba447b068d04f27f88f85d8e05--tropical-animals-tropical-fish.jpg", "caption": "A white-red betta"}
        ]'></carousel-waterwheel>
      </template>
    </test-fixture>
    
    <test-fixture id="OpacityGen-ActAdj">
      <template>
        <carousel-waterwheel data='[
          {"src": "https://thumbs.dreamstime.com/b/male-crowntail-betta-fish-isolated-black-background-beautiful-blue-77203959.jpg", "caption": "A blue betta"},
          {"src": "https://upload.wikimedia.org/wikipedia/commons/4/42/Betta_splendens_male_crowntail.png", "caption": "A blue-red betta"},
          {"src": "https://cdn.idropnews.com/wp-content/uploads/2017/03/23164924/Beta-Fish-Wallpaper-Chevanon-Photography-1000x600.jpg", "caption": "A red betta"},
          {"src": "https://thumbs.dreamstime.com/b/blue-crowntail-betta-fish-siamese-fighting-fish-black-background-71712481.jpg", "caption": "A blue betta"},
          {"src": "https://thumbs.dreamstime.com/b/red-blue-siamese-fighting-fish-betta-fish-isolated-black-background-58695275.jpg", "caption": "A red-white betta"},
          {"src": "http://fishkeepingadvice.com/wp-content/uploads/siamese-fighting-fish.jpg", "caption": "A blue-purple betta"},
          {"src": "https://static.seattletimes.com/wp-content/uploads/2016/11/66ae45dc30524386bf08aee8a751b279-780x532.jpg", "caption": "A red-white-blue betta"},
          {"src": "https://media.istockphoto.com/photos/white-yellow-siamese-fighting-fish-picture-id601925038?k=6&m=601925038&s=612x612&w=0&h=pOtNyPfF6pEgm_x8Qi1flpLKmJ1tcbOhnEsZ97BO8wE=", "caption": "A yellow-white betta"},
          {"src": "http://www.fubiz.net/wp-content/uploads/2013/11/Stunning-Portraits-of-Fish-1.jpg", "caption": "A white betta"},
          {"src": "https://i.pinimg.com/736x/41/f3/ea/41f3eaba447b068d04f27f88f85d8e05--tropical-animals-tropical-fish.jpg", "caption": "A white-red betta"}
        ]'></carousel-waterwheel>
      </template>
    </test-fixture>
    
    <test-fixture id="OpacityGen-ActAdjEnd">
      <template>
        <carousel-waterwheel data='[
          {"src": "https://thumbs.dreamstime.com/b/male-crowntail-betta-fish-isolated-black-background-beautiful-blue-77203959.jpg", "caption": "A blue betta"},
          {"src": "https://upload.wikimedia.org/wikipedia/commons/4/42/Betta_splendens_male_crowntail.png", "caption": "A blue-red betta"},
          {"src": "https://cdn.idropnews.com/wp-content/uploads/2017/03/23164924/Beta-Fish-Wallpaper-Chevanon-Photography-1000x600.jpg", "caption": "A red betta"},
          {"src": "https://thumbs.dreamstime.com/b/blue-crowntail-betta-fish-siamese-fighting-fish-black-background-71712481.jpg", "caption": "A blue betta"},
          {"src": "https://thumbs.dreamstime.com/b/red-blue-siamese-fighting-fish-betta-fish-isolated-black-background-58695275.jpg", "caption": "A red-white betta"},
          {"src": "http://fishkeepingadvice.com/wp-content/uploads/siamese-fighting-fish.jpg", "caption": "A blue-purple betta"},
          {"src": "https://static.seattletimes.com/wp-content/uploads/2016/11/66ae45dc30524386bf08aee8a751b279-780x532.jpg", "caption": "A red-white-blue betta"},
          {"src": "https://media.istockphoto.com/photos/white-yellow-siamese-fighting-fish-picture-id601925038?k=6&m=601925038&s=612x612&w=0&h=pOtNyPfF6pEgm_x8Qi1flpLKmJ1tcbOhnEsZ97BO8wE=", "caption": "A yellow-white betta"},
          {"src": "http://www.fubiz.net/wp-content/uploads/2013/11/Stunning-Portraits-of-Fish-1.jpg", "caption": "A white betta"},
          {"src": "https://i.pinimg.com/736x/41/f3/ea/41f3eaba447b068d04f27f88f85d8e05--tropical-animals-tropical-fish.jpg", "caption": "A white-red betta"}
        ]'></carousel-waterwheel>
      </template>
    </test-fixture>

    <script>
      
      function checkOpacity(element) {
        var retval = [];
        const images = ['.next-end', '.next-adj', '.active', '.prev-adj', '.prev-end'];
        
        for (var i = 0; i < images.length; i++) {
          var style = window.getComputedStyle(element.querySelector(images[i]), null);
          var opacity = Number(style.getPropertyValue('opacity'));
          retval.push(opacity); 
        }
        return retval;
      }
      
      suite('carousel-waterwheel', () => {

        test('Default opacity', () => {
          const el = fixture('Default');
          const retval = checkOpacity(el);
          assert.deepEqual(retval, [0.75, 0.9, 1, 0.9, 0.75]);
        });
        
        test('--opacity: 1', (done) => {
          const el = fixture('OpacityGen');
          el.style.setProperty('--opacity', '1');

          setTimeout(function() {
            const retval = checkOpacity(el);
            assert.deepEqual(retval, [1, 1, 1, 1, 1]);
            done();
          }, 500);
        });
        
        test('--opacity: 0.95 0.35', (done) => {
          const el = fixture('OpacityGen-ActAdj');
          el.style.setProperty('--opacity', '0.95 0.35');
          
          setTimeout(function() {
            const retval = checkOpacity(el);
            assert.deepEqual(retval, [0.35, 0.35, 0.95, 0.35, 0.35]);
            done();
          }, 500);
        });
        
        test('--opacity: 1 0.6 0.8', (done) => {
          const el = fixture('OpacityGen-ActAdjEnd');
          el.style.setProperty('--opacity', '1 0.6 0.8');
          
          setTimeout(function() {
            const retval = checkOpacity(el);
            assert.deepEqual(retval, [0.8, 0.6, 1, 0.6, 0.8]);
            done();
          }, 500);
        });
        
      });
    </script>

  </body>
</html>
